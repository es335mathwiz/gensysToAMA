function [residual, g1, g2] = test_matlab_dynamic(y, x)
% 
% Status : Computes dynamic model for Dynare
% 
% Warning : this file is generated automatically by Dynare
%   from model file (.mod)

global M_ it_
if M_.param_nbr > 0
  params =  M_.params;
end

	% 
	% Model equations
	% 

residual = zeros(6, 1);
T1330404425 = y(5)*exp(y(9))/(exp(y(12))*y(11));
T1330404432 = params(3)*exp(y(12))*y(10)+y(6)*(1.0-params(4));
T1330404440 = exp(y(7))*y(1)^params(3);
T1330404441 = y(8)^(1.0-params(3));
T1330404442 = T1330404440*T1330404441;
T1330404467 = exp(y(12))*y(11)*exp(y(12))*y(11);
T1330404468 = exp(y(9))*exp(y(12))*y(11)/T1330404467;
T1330404487 = y(5)*exp(y(9))*exp(y(12))*y(11)/T1330404467;
T1330404493 = (-(y(5)*exp(y(9))*exp(y(12))*y(11)))/T1330404467;
T1330404501 = (-(y(5)*exp(y(9))*exp(y(12))))/T1330404467;
T1330404514 = (-(T1330404441*exp(y(7))*params(3)*y(1)^(params(3)-1.0)));
lhs =y(5)*params(5)*y(8)^(1.0+params(6));
rhs =(1.0-params(3))*y(4);
residual(1)= lhs-rhs;
lhs =y(6);
rhs =params(1)*T1330404425*T1330404432;
residual(2)= lhs-rhs;
lhs =y(4);
rhs =T1330404442;
residual(3)= lhs-rhs;
lhs =y(6);
rhs =exp(y(9))*(y(4)-y(5))+(1.0-params(4))*y(1);
residual(4)= lhs-rhs;
lhs =y(7);
rhs =params(2)*y(2)+params(7)*y(3)+x(it_, 1);
residual(5)= lhs-rhs;
lhs =y(9);
rhs =y(2)*params(7)+params(2)*y(3)+x(it_, 2);
residual(6)= lhs-rhs;
if nargout >= 2,
  g1 = zeros(6, 14);

	% 
	% Jacobian matrix
	% 

  g1(1, 5)=  g1(1, 5)+params(5)*y(8)^(1.0+params(6));
  g1(1, 8)=  g1(1, 8)+y(5)*params(5)*(1.0+params(6))*y(8)^(1.0+params(6)-1.0);
  g1(1, 4)=  g1(1, 4)+(-(1.0-params(3)));
  g1(2, 5)=  g1(2, 5)+(-(params(1)*T1330404432*T1330404468));
  g1(2, 6)=  g1(2, 6)+1.0-params(1)*T1330404425*(1.0-params(4));
  g1(2, 9)=  g1(2, 9)+(-(params(1)*T1330404432*T1330404487));
  g1(2, 12)=  g1(2, 12)+(-(params(1)*(T1330404432*T1330404493+T1330404425*params(3)*exp(y(12))*y(10))));
  g1(2, 11)=  g1(2, 11)+(-(params(1)*T1330404432*T1330404501));
  g1(2, 10)=  g1(2, 10)+(-(params(1)*T1330404425*params(3)*exp(y(12))));
  g1(3, 8)=  g1(3, 8)+(-(T1330404440*(1.0-params(3))*y(8)^(1.0-params(3)-1.0)));
  g1(3, 4)=  g1(3, 4)+1.0;
  g1(3, 7)=  g1(3, 7)+(-T1330404442);
  g1(3, 1)=  g1(3, 1)+T1330404514;
  g1(4, 5)=  g1(4, 5)+exp(y(9));
  g1(4, 4)=  g1(4, 4)+(-exp(y(9)));
  g1(4, 6)=  g1(4, 6)+1.0;
  g1(4, 9)=  g1(4, 9)+(-(exp(y(9))*(y(4)-y(5))));
  g1(4, 1)=  g1(4, 1)+(-(1.0-params(4)));
  g1(5, 7)=  g1(5, 7)+1.0;
  g1(5, 2)=  g1(5, 2)+(-params(2));
  g1(5, 3)=  g1(5, 3)+(-params(7));
  g1(5, 13)=  g1(5, 13)+(-1.0);
  g1(6, 9)=  g1(6, 9)+1.0;
  g1(6, 2)=  g1(6, 2)+(-params(7));
  g1(6, 3)=  g1(6, 3)+(-params(2));
  g1(6, 14)=  g1(6, 14)+(-1.0);
end
if nargout >= 3,
  g2 = sparse([],[],[],6, 196, 980);

	% 
	% Hessian matrix
	% 

  g2(1, 103) = params(5)*(1.0+params(6))*y(8)^(1.0+params(6)-1.0);
  g2(1, 106) = y(5)*params(5)*(1.0+params(6))*(1.0+params(6)-1.0)*y(8)^(1.0+params(6)-1.0-1.0);
  g2(2, 75) = (-(params(1)*(1.0-params(4))*T1330404468));
  g2(2, 117) = (-(params(1)*T1330404432*exp(y(9))*exp(y(12))*y(11)*T1330404467/(T1330404467*T1330404467)));
  g2(2, 118) = (-(params(1)*(1.0-params(4))*T1330404487));
  g2(2, 121) = (-(params(1)*T1330404432*T1330404467*y(5)*exp(y(9))*exp(y(12))*y(11)/(T1330404467*T1330404467)));
  g2(2, 159) = (-(params(1)*(T1330404432*T1330404467*(-(exp(y(9))*exp(y(12))*y(11)))/(T1330404467*T1330404467)+params(3)*exp(y(12))*y(10)*T1330404468)));
  g2(2, 160) = (-(params(1)*(1.0-params(4))*T1330404493));
  g2(2, 163) = (-(params(1)*(T1330404432*T1330404467*(-(y(5)*exp(y(9))*exp(y(12))*y(11)))/(T1330404467*T1330404467)+params(3)*exp(y(12))*y(10)*T1330404487)));
  g2(2, 166) = (-(params(1)*(params(3)*exp(y(12))*y(10)*T1330404493+T1330404432*(T1330404467*(-(y(5)*exp(y(9))*exp(y(12))*y(11)))-(-(y(5)*exp(y(9))*exp(y(12))*y(11)))*(T1330404467+T1330404467))/(T1330404467*T1330404467)+T1330404425*params(3)*exp(y(12))*y(10)+params(3)*exp(y(12))*y(10)*T1330404493)));
  g2(2, 145) = (-(params(1)*T1330404432*T1330404467*(-(exp(y(9))*exp(y(12))))/(T1330404467*T1330404467)));
  g2(2, 146) = (-(params(1)*(1.0-params(4))*T1330404501));
  g2(2, 149) = (-(params(1)*T1330404432*T1330404467*(-(y(5)*exp(y(9))*exp(y(12))))/(T1330404467*T1330404467)));
  g2(2, 152) = (-(params(1)*(params(3)*exp(y(12))*y(10)*T1330404501+T1330404432*(T1330404467*(-(y(5)*exp(y(9))*exp(y(12))))-(-(y(5)*exp(y(9))*exp(y(12))))*(T1330404467+T1330404467))/(T1330404467*T1330404467))));
  g2(2, 151) = (-(params(1)*T1330404432*(-((-(y(5)*exp(y(9))*exp(y(12))))*(exp(y(12))*exp(y(12))*y(11)+exp(y(12))*exp(y(12))*y(11))))/(T1330404467*T1330404467)));
  g2(2, 131) = (-(params(1)*params(3)*exp(y(12))*T1330404468));
  g2(2, 135) = (-(params(1)*params(3)*exp(y(12))*T1330404487));
  g2(2, 138) = (-(params(1)*(T1330404425*params(3)*exp(y(12))+params(3)*exp(y(12))*T1330404493)));
  g2(2, 137) = (-(params(1)*params(3)*exp(y(12))*T1330404501));
  g2(3, 106) = (-(T1330404440*(1.0-params(3))*(1.0-params(3)-1.0)*y(8)^(1.0-params(3)-1.0-1.0)));
  g2(3, 92) = (-(T1330404440*(1.0-params(3))*y(8)^(1.0-params(3)-1.0)));
  g2(3, 91) = (-T1330404442);
  g2(3, 8) = (-((1.0-params(3))*y(8)^(1.0-params(3)-1.0)*exp(y(7))*params(3)*y(1)^(params(3)-1.0)));
  g2(3, 7) = T1330404514;
  g2(3, 1) = (-(T1330404441*exp(y(7))*params(3)*(params(3)-1.0)*y(1)^(params(3)-1.0-1.0)));
  g2(4, 117) = exp(y(9));
  g2(4, 116) = (-exp(y(9)));
  g2(4, 121) = (-(exp(y(9))*(y(4)-y(5))));
  g2(1, 64) = g2(1, 103);
  g2(2, 62) = g2(2, 75);
  g2(2, 65) = g2(2, 117);
  g2(2, 79) = g2(2, 118);
  g2(2, 68) = g2(2, 159);
  g2(2, 82) = g2(2, 160);
  g2(2, 124) = g2(2, 163);
  g2(2, 67) = g2(2, 145);
  g2(2, 81) = g2(2, 146);
  g2(2, 123) = g2(2, 149);
  g2(2, 165) = g2(2, 152);
  g2(2, 66) = g2(2, 131);
  g2(2, 122) = g2(2, 135);
  g2(2, 164) = g2(2, 138);
  g2(2, 150) = g2(2, 137);
  g2(3, 105) = g2(3, 92);
  g2(3, 99) = g2(3, 8);
  g2(3, 85) = g2(3, 7);
  g2(4, 65) = g2(4, 117);
  g2(4, 51) = g2(4, 116);
end;
